<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>YamlLocalesJsonizer by morhekil</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>YamlLocalesJsonizer</h1>
          <h2>Simple generation of JSON data for a frontend from Rails-style YAML locales</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="http://rubygems.org/gems/yaml_locales_jsonizer" id="download-gem" class="button"><span>Download gem file</span></a>
          <a href="https://github.com/morhekil/yaml_locales_jsonizer" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>
        <section id="gemdata" class="clearfix">
          <a href="http://badge.fury.io/rb/yaml_locales_jsonizer"><img src="https://badge.fury.io/rb/yaml_locales_jsonizer@2x.png" alt="Gem Version" height="18"></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a name="yamllocalesjsonizer" class="anchor" href="#yamllocalesjsonizer"><span class="octicon octicon-link"></span></a>YamlLocalesJsonizer</h1>

<p>Simple generation of JSON i18n data for the frontend based on Rails-style YAML
locales.</p>

<p>The gem gives you the following:</p>

<ol>
<li>Asset file for the asset pipeline, to be used in production.</li>
<li>View helper, to assist with locale updates in development.</li>
</ol><p>The reason we need both an asset file and a view helper is that changes in
dynamic assets derived from other resources are not being detected and picked
up by sprockets properly, and they require a full server restart AND cache wipe
to force the asset cache to be recompiled, and the change to get applied.</p>

<p>To provide better development experience, an action view helper allows to
override the asset file, and inject the correct JSON data into the page
directly. Of course, due to the increased size of HTML pages, it is not a
recommended technique for production use.</p>

<h2>
<a name="compatibility" class="anchor" href="#compatibility"><span class="octicon octicon-link"></span></a>Compatibility</h2>

<p>The current version is built to support <a href="http://i18next.com/">i18next</a>, and
produces JSON data in the format expected by this tool. If you want to have
support for other i18n engines - open an issue with a feature request, or
(even better) - take a look at <code>styles/i18next.rb</code> file and send me a pull
request.</p>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Add this line to your application's Gemfile:</p>

<pre><code>gem 'yaml_locales_jsonizer'
</code></pre>

<p>And then execute:</p>

<pre><code>$ bundle
</code></pre>

<p>Or install it yourself as:</p>

<pre><code>$ gem install yaml_locales_jsonizer
</code></pre>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Add to your asset manifest file, for production:</p>

<pre><code>//= require yaml_locales_jsonizer
</code></pre>

<p>For effortless locale updates in dev environment, add a helper call to your
view (e.g. layout file).  Make sure to add it AFTER your regular assets, to let
it override cached asset data!</p>

<div class="highlight highlight-erb"><pre><span class="x">= javascript_include_tag 'application' # application assets</span>
<span class="x">= yaml_locales_jsonizer if Rails.env.development?</span>
</pre></div>

<p>JSON data is exposed via <code>yaml_locales_jsonised</code> variable, so initialize
i18next with this variable as the resource storage:</p>

<div class="highlight highlight-javascript"><pre><span class="nx">i18n</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span><span class="nx">resStore</span><span class="o">:</span> <span class="nx">yaml_locales_jsonized</span><span class="p">});</span>
</pre></div>

<h2>
<a name="advanced-configuration" class="anchor" href="#advanced-configuration"><span class="octicon octicon-link"></span></a>Advanced configuration</h2>

<p>Gem should be usable out of the box, loading all YAML locales available in
Rails. Additionally, it can be configured with an initializer, e.g.
<code>config/initializers/yaml_locales_jsonizer.rb</code>. Example:</p>

<div class="highlight highlight-ruby"><pre><span class="no">YamlLocalesJsonizer</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span>
  <span class="c1"># Add to or overwrite load path. By default the load path uses Rails' i18n</span>
  <span class="c1"># settings available in Rails.configuration.i18n[:load_path]</span>
  <span class="n">load_path</span> <span class="o">&lt;&lt;</span> <span class="s2">"/some/other/path"</span>

  <span class="c1"># Filter out files discovered via load_path, and jsonize only the ones</span>
  <span class="c1"># matching the list. List could contain either file names, or shell-like</span>
  <span class="c1"># glob patterns (matched with [File#fnmatch](http://www.ruby-doc.org/core-2.1.0/File.html#method-c-fnmatch))</span>
  <span class="n">only_files</span> <span class="sx">%w(ru.yml en.yml)</span>
<span class="k">end</span>

</pre></div>

<h2>
<a name="contributing" class="anchor" href="#contributing"><span class="octicon octicon-link"></span></a>Contributing</h2>

<ol>
<li>Fork it</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create new Pull Request</li>
</ol>
        </section>

        <footer>
          YamlLocalesJsonizer is maintained by <a href="https://github.com/morhekil">morhekil</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-6087444-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>
